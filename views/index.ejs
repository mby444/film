<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBY444 - ALL FILM TRAILERS and INFO</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <header class="container-fluid d-flex justify-content-center align-items-center bg-warning pt-2 pb-2">
        <div class="title-conteiner conteiner-sm d-flex justify-content-center align-items-center flex-column">
            <h1 class="h1">MBY444</h1>
            <h4 class="h4">Film Informations and Trailers</h4>
        </div>
    </header>
    <div class="main-container container-fluid pt-5">
        <form action="/search" method="get" class="container-md d-flex justify-content-center align-items-center flex-row">
            <input type="text" name="q" id="q-input" placeholder="Search film..." required class="form-control" style="max-width:500px;">
            <input type="submit" value="Search" class="search-btn btn btn-dark">
        </form>
        <% if (query) { %>
            <div class="pointer container-sm d-flex justify-content-center">
                <a href="/search?q=<%= query %>&page=<%= +page - 1 <= 0 ? 1 : +page - 1 %>" class="btn btn-dark text-white">&#10094;</a>
                <input type="text" value="Page <%= page %> of <%= pageTotal %>" class="text-center" disabled>
                <a href="/search?q=<%= query %>&page=<%= +page + 1 > +pageTotal ? +page : +page + 1 %>" class="btn btn-dark text-white">&#10095;</a>
            </div>
        <% } %>
        <% if (filmError) { %>
            <div class="error-container conteiner-sm alert alert-danger d-flex justify-content-center align-items-center mt-2 mb-2" style="max-width:500px; position:relative; left:50%; transform:translate(-50%,0);">
                <%= filmError %>
            </div>
        <% } %>
        <div class="films-container container-md pt-5 pb-5" style="display:grid; grid-template-columns:auto auto auto;">
            <% if (films && !filmError) { %>
                <% films.results.forEach((result, i) => { %>
                    <div class="card m-2 mt-4 mb-4" style="width: 25vw;">
                        <a href="/info/<%= result.id %>">
                            <img src="https://image.tmdb.org/t/p/w500<%= result.poster_path %>" class="card-img-top" alt="<%= result.title %>">
                        </a>
                        <div class="card-body">
                          <h6 class="card-title"><%= result.title %> <%= result.release_date ? `(${result.release_date.split("-")[0]})` : "" %></h6>
                          <div class="card-text"><svg style="position:relative; transform:translate(0,-22%);" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                          </svg> <%= result.vote_average %> (<%= result.vote_count %>&nbsp;vote<%= result.vote_count > 1 ? "s" : "" %>)</div>
                        </div>
                      </div>
                <% }) %>
            <% } %>
        </div>
    </div>
    <footer class="container-fluid bg-dark p-2 pt-4 pb-4">
        <div class="form-req-container container-md d-flex justify-content-center align-items-center flex-column">
            <h5 class="h5 text-center text-white pt-2 pb-2">Any request&quest;</h5>
            <form action="/" class="form-req container-sm d-flex justify-content-center align-items-center flex-column">
                <input type="email" name="email" id="email-input" class="form-control mt-2 mb-2" placeholder="Email" required>
                <textarea name="message" id="message-input" cols="30" rows="4" class="form-control mt-3 mb-2" placeholder="Any message..." required></textarea>
                <input type="submit" value="Send" class="req-btn btn btn-warning text-dark mt-3 mb-3">
            </form>
        </div>
        <div class="copyright-container container-fluid text-center mt-4">
            <p class="copyright text-white" style="font-size:12px;">&copy; 2022 <%= new Date().getFullYear() === 2022 ? "" : `- ${new Date().getFullYear()}` %> MBY444</p>
        </div>
    </footer>
    <script src="/js/main.js"></script>
</body>
</html>